function favorites(){var o=this;this.init=function(){return o};this.submit=function(submitType,parm,favstatus,obj,fn){var p=parm.split("_");if(parseInt(p[3])==-1){location.href="/reg/login.html"}else{if(favstatus==0){o.submitdb(submitType,parm,favstatus,obj,fn)}else{$.jconfirm("","确定取消收藏吗？",400,function(){o.submitdb(submitType,parm,favstatus,obj,fn)})}}};this.submitdb=function(submitType,parm,favstatus,obj,fn){var _this=$(obj);var oldClick=_this.attr("onclick");glb.ajax(glb.ajaxUrl+"savefavorites","json","parm="+parm+"&favstatus="+favstatus,function(){_this.attr("onclick","")},function(data){var d=eval(data);if(d.status==1){$.jsuccess((favstatus==0?"收藏成功":"已取消收藏"),250,null,null);if(submitType==1){fn.call()}else{_this.attr("onclick","_favorites.submit(0,'"+parm+"',"+(favstatus==0?1:0)+",this,null)");var txt=_this.find("i");if(favstatus==0){txt.text(txt.text().replace("尚未","取消").replace("继续","取消"))}else{txt.text(txt.text().replace("取消","继续").replace("已","继续"))}}}else{if(d.status==3){o.jalert("抱歉，系统检测到您有严重违规操作行为，已被禁止操作")}else{if(d.status==4){$.jconfirm("","收藏请先激活账号，确定要激活账号吗？<br /><br />",500,function(){$.jfnclose();location.href="/reg/verify.html"})}else{if(d.status==5){$.jconfirm("","您的咨询师账号尚未通过审核，不能使用收藏，请检查您的资料是否已完善？<br /><br />",600,function(){$.jfnclose();location.href="/reg/success.html"})}else{if(d.status==6){o.jalert("抱歉，您已被该主人拉入黑名单，不能添加到收藏")}else{if(d.status==7){o.jalert("抱歉，您已被网站管理员拉入黑名单，不能添加到收藏")}else{if(d.status==8){o.jalert("抱歉，您今天的收藏数已达上限，明天继续哦")}else{_this.attr("onclick",oldClick);o.jalert("系统繁忙,请稍候...")}}}}}}}},function(){_this.attr("onclick",oldClick);o.jalert("系统繁忙,请稍候...")})};this.jalert=function(info){$.jalerttimer("",info+"<br /><br />",500,function(){$.jfnclose()},9)}};